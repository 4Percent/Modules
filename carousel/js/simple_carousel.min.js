!function(t){function s(t,s){return Math.floor(Math.random()*(s-t+1)+t)}function e(t,s){t&&(s=s||{},this.con=t,this.cards=t.querySelectorAll(".m-crs-card"),this.duration=s.duration||400,this.easing=o[s.easing]||o.easeOut,this.defaultBtns=s.btns,this.defaultBtnMode=s.btnMode,this.defaultTabs=s.tabs,this.defaultTabMode=s.tabMode,this.autoPlayMode=s.autoPlay,this.autoPlayInterval=s.autoPlayInterval,this.allModes=["horizontal","vertical","fade","cover"],this.init())}function i(t,s){s=s||{},this.con=t,this.cards=t.querySelectorAll(".m-crs-card"),this.duration=s.duration||400,this.transDuration=this.duration/1e3,this.easing=o[s.easing]||o.easeOut,this.cols=s.cols,this.rows=s.rows,this.openInNewWindow=s.newWindow,this.perspective=s.perspective||1e3,this.defaultBtns=s.btns,this.defaultBtnMode=s.btnMode,this.defaultTabs=s.tabs,this.defaultTabMode=s.tabMode,this.autoPlayMode=s.autoPlay,this.autoPlayInterval=s.autoPlayInterval,this.allModes=["explode","blowaway","adboard","reverse","flipover","cube","horizontal","vertical","fade","cover"],this.init()}var r=t.requestAnimationFrame?function(s){return t.requestAnimationFrame(s)}:function(s){return t.setTimeout(s,20)},a=(t.cancelAnimationFrame?function(s){t.cancelAnimationFrame(s)}:function(s){t.clearTimeout(s)},t.addEventListener?function(t,s,e){t.addEventListener(s,e,!1)}:function(s,e,i){s.attachEvent("on"+e,function(){var e,r=t.event;return r.preventDefault=function(){e=!1},i.call(s,r),e})}),n=t.getComputedStyle?function(s,e){return parseFloat(t.getComputedStyle(s,"")[e])}:function(t,s){return parseFloat(t.currentStyle[s])},o={linear:function(t,s,e,i){return e*t/i+s},easeIn:function(t,s,e,i){return e*(t/=i)*t*t+s},easeOut:function(t,s,e,i){return e*((t=t/i-1)*t*t+1)+s},bounce:function(t,s,e,i){return(t/=i)<1/2.75?e*(7.5625*t*t)+s:2/2.75>t?e*(7.5625*(t-=1.5/2.75)*t+.75)+s:2.5/2.75>t?e*(7.5625*(t-=2.25/2.75)*t+.9375)+s:e*(7.5625*(t-=2.625/2.75)*t+.984375)+s}},h=/MSIE\s*8.0/.test(t.navigator.userAgent),c=/firefox/i.test(t.navigator.userAgent);e.prototype={constructor:e,init:function(){this.curIdx=0,this.isOperational=!0,this.initAttrs(),this.resetStyle(),this.defaultBtns&&(this.createDefaultBtns(),delete this.defaultBtns),this.defaultTabs&&(this.createDefaultTabs(this.defaultTabs),delete this.defaultTabs),this.autoPlayMode&&this.startAutoPlay()},initAttrs:function(){this.activeTabs=[],this.actClazzes=[],this.cardCount=this.cards.length,this.cardWidth=this.cards[0].offsetWidth,this.cardHeight=this.cards[0].offsetHeight},resetStyle:function(){var t;this.cards[0].style.left=0,this.cards[0].style.top=0;for(var s=1;s<this.cards.length;s++)t=this.cards[s],t.style.left=this.cardWidth+"px",t.style.top="0px"},createDefaultBtns:function(){var t=document.createDocumentFragment(),s=document.createElement("a"),e=document.createElement("a"),i=~~(this.cardHeight/8);s.className="m-crs-btnL",e.className="m-crs-btnR",s.href=e.href="javascript:;",s.innerHTML="Prev",e.innerHTML="Next",s.style.cssText=e.style.cssText="width:"+~~(this.cardWidth/10)+"px;height:"+i+"px;margin-top:"+-i/2+"px;font-size:"+~~(this.cardWidth/30)+"px;line-height:"+i+"px",t.appendChild(s),t.appendChild(e),this.con.appendChild(t),this.addBtn(s,this.defaultBtnMode,-1),this.addBtn(e,this.defaultBtnMode,1),delete this.defaultBtnMode},createDefaultTabs:function(t){var s,e,i,r=document.createElement("ol"),a="";/^h/i.test(t)?(r.className="m-crs-tabWrap-h",s=~~(this.cardWidth/25),e=~~(s/2),i=(2*e+s)*this.cards.length,r.style.width=i+"px"):(r.className="m-crs-tabWrap-v",s=~~(this.cardHeight/25),e=~~(s/2),i=(2*e+s)*this.cards.length,r.style.height=i+"px");for(var n=0;n<this.cards.length;n++)a+='<li style="width:'+s+"px;height:"+s+"px;margin:"+e+'px;"></li>';r.innerHTML=a,r.children[0].className="m-crs-act",this.con.appendChild(r),this.addTabs(r,this.defaultTabMode,"m-crs-act"),delete this.defaultTabMode},addBtn:function(t,s,e){var i=this;a(t,"click",function(){if(i.isOperational){var t=(i.curIdx+e+i.cardCount)%i.cardCount;i.isOperational=!1,i[s](t),i.switchTab(t)}}),a(t,"mousedown",function(t){t.preventDefault()})},addTabs:function(t,s,e){var i=this;this.activeTabs.push(t),this.actClazzes.push(e);for(var r=0;r<t.children.length;r++)!function(e){a(t.children[r],"click",function(){i.isOperational&&e!==i.curIdx&&(i.isOperational=!1,i[s](e),i.switchTab(e))}),a(t.children[r],"mousedown",function(t){t.preventDefault()})}(r)},switchTab:function(t){for(var s,e,i=0;i<this.activeTabs.length;i++)s=this.activeTabs[i],e=this.actClazzes[i],s.children[this.curIdx].className=s.children[this.curIdx].className.replace(new RegExp("\\b"+e+"\\b"),"").replace(/\s+/g," ").replace(/^\s|\s$/g,""),s.children[t].className+=" "+e;this.autoPlayMode&&!this.isMouseEntered&&(clearTimeout(this.autoPlayTimer),this.autoPlayFn()),this.curIdx=t},animate:function(t,s){for(var e=~~(this.duration/20),i=0,a=this.easing,o=this,h=0;h<t.length;h++)t[h].base=n(t[h].elt,t[h].prop),t[h].incre=t[h].dst-t[h].base;r(function c(){var n,h;i++;for(var l=0;l<t.length;l++)h=t[l],n=a(i,h.base,h.incre,e),"opacity"===h.prop?(h.elt.style.opacity=n,h.elt.style.filter="alpha(opacity="+100*n+")"):h.elt.style[h.prop]=n+"px";e>i?r(c):(s&&s(),o.isOperational=!0)})},randomMode:function(t){this[this.allModes[s(0,this.allModes.length-1)]](t)},setModeToTranslate:function(t,s){var e;this.con.style.overflow="hidden",this.mode=t;for(var i=0;i<this.cards.length;i++)e=this.cards[i],e.style.opacity=1,e.style.filter="alpha(opacity=100)",e.style.width=this.cardWidth+"px",e.style.height=this.cardHeight+"px",s(e,i===this.curIdx)},translate:function(t,s,e,i,r){var a,n=this.cards[this.curIdx],o=this.cards[s];this.mode!==t&&this.setModeToTranslate(t,function(t,s){t.style[i]=0,s?t.style[e]=0:t.style[e]=r+"px"}),s<this.curIdx&&(this.curIdx!==this.cardCount-1||0!==s)||0===this.curIdx&&s===this.cardCount-1?(o.style[e]=-r+"px",a=r):(o.style[e]=r+"px",a=-r),this.animate([{elt:n,prop:e,dst:a},{elt:o,prop:e,dst:0}])},horizontal:function(t){this.translate("horizontal",t,"left","top",this.cardWidth)},vertical:function(t){this.translate("vertical",t,"top","left",this.cardHeight)},setModeToFade:function(t){for(var s,e=0;e<this.cardCount;e++)s=this.cards[e],e===this.curIdx?(s.style.opacity=1,h&&(s.style.filter="alpha(opacity=100)"),s.style.zIndex=10):(s.style.opacity=0,h&&(s.style.filter="alpha(opacity=0)"),s.style.zIndex=0),s.style.left=0,s.style.top=0,this.con.style.overflow="visible";this.mode=t},fade:function(t){var s=this.cards[t],e=this.cards[this.curIdx];"fade"!==this.mode&&this.setModeToFade("fade"),e.style.zIndex=0,s.style.zIndex=10,this.animate([{elt:s,prop:"opacity",dst:1},{elt:e,prop:"opacity",dst:0}])},cover:function(t){var s=this.cards[t],e=this.cards[this.curIdx],i=this.cardWidth,r=this.cardHeight,a=n(s,"fontSize"),o=n(s,"lineHeight");"cover"!==this.mode&&this.setModeToFade("cover"),e.style.zIndex=5,s.style.zIndex=10,s.style.width=1.4*i+"px",s.style.height=1.4*r+"px",s.style.left=.2*-i+"px",s.style.top=.2*-r+"px",s.style.opacity=0,s.style.fontSize=1.4*a+"px",s.style.lineHeight=1.4*o+"px",s.style.filter="alpha(opacity=100)",this.animate([{elt:s,prop:"opacity",dst:1},{elt:s,prop:"width",dst:i},{elt:s,prop:"height",dst:r},{elt:s,prop:"left",dst:0},{elt:s,prop:"top",dst:0},{elt:s,prop:"fontSize",dst:a},{elt:s,prop:"lineHeight",dst:o}],function(){e.style.zIndex=0})},startAutoPlay:function(){function t(t){if(!i.isOperational)return void i.autoPlayFn();i.isOperational=!1;var e=(i.curIdx+1)%i.cardCount;s.call(i,e),i.switchTab(e)}var s=this[this.autoPlayMode],e=this.autoPlayInterval,i=this;delete this.autoPlayInterval,this.autoPlayFn=function(){i.autoPlayTimer=setTimeout(t,e)},this.autoPlayFn(),a(this.con,"mouseenter",function(){i.isMouseEntered=!0,clearTimeout(i.autoPlayTimer)}),a(this.con,"mouseleave",function(){i.isMouseEntered=!1,i.autoPlayFn()})},stop:function(){t.clearTimeout(this.autoPlayTimer)},restart:function(){this.autoPlayFn()}};var l=e.prototype.initAttrs;i.prototype=new e,i.prototype.extend=function(t){for(var s in t)this[s]=t[s]},i.prototype.extend({initAttrs:function(){l.call(this);var t;this.bgs=[],this.refs=[];for(var s=0;s<this.cards.length;s++)t=this.cards[s],this.bgs.push(t.querySelector("img").src),"A"===t.tagName?this.refs.push(t.href):this.refs.push(t.querySelector("a").href);this.cellWidth=this.cardWidth/this.cols,this.cellHeight=this.cardHeight/this.rows,this.centerX=this.cardWidth/2,this.centerY=this.cardHeight/2,this.con.style.perspective=this.perspective+"px",this.initBricksAndPlates(),this.initMaskAnchor(),this.initCubeFaces(),this.initPages()},initBricksAndPlates:function(){var t,t,s,e,i,r,a,n,o,h=this,c=this.centerX,l=this.centerY,d=this.cols+this.rows-2,u=-this.cardWidth,p=-this.cardHeight;this.bricks=[],this.plates=[],this.explodeDuration=1.5*this.transDuration,this.groundZero=~~(Math.min(this.cardWidth,this.cardHeight)/2),this.initialForce=this.groundZero*this.groundZero*this.perspective*.6;for(var f=0;f<this.rows;f++)for(var y=0;y<this.cols;y++)t=document.createElement("span"),t.className="m-crs-brick",t.style.cssText="width:"+this.cellWidth+"px;height:"+this.cellHeight+"px;left:"+y*this.cellWidth+"px;top:"+f*this.cellHeight+"px;background-image:url("+this.bgs[this.curIdx]+");background-position:-"+y*this.cellWidth+"px -"+f*this.cellHeight+"px;background-size:"+this.cardWidth+"px "+this.cardHeight+"px;",t.centerX=y*this.cellWidth+this.cellWidth/2,t.centerY=f*this.cellHeight+this.cellHeight/2,s=t.centerX-c,e=t.centerY-l,i=Math.sqrt(s*s+e*e),a=Math.atan2(e,s),r=Math.atan2(this.groundZero,i),i=i*i+this.groundZero*this.groundZero,n=this.initialForce/i,t.Fz=~~(Math.sin(r)*n),n=Math.cos(r)*n,t.Fx=~~(Math.cos(a)*n),t.Fy=~~(Math.sin(a)*n),o=(f+y)/d,t.blowX=~~((o*Math.random()+.3)*u),t.blowY=~~((o*Math.random()+.3)*p),t.blowZ=~~((o*Math.random()+.2)*this.perspective*1.2),this.bricks.push(t);this.bricks[0].addEventListener("transitionend",function(){"bricks"===h.mode&&(h.isOperational||(h.resetBricks(),h.isOperational=!0))},!1),this.bricks[this.bricks.length-1].addEventListener("transitionend",function(){"adboard"===h.mode&&this.realEnd&&(h.resetBricks(),h.isOperational=!0)})},initMaskAnchor:function(){var t=this,s=0;this.maskAnchor=document.createElement("a"),this.maskAnchor.href=this.refs[0],this.openInNewWindow&&(this.maskAnchor.target="_blank"),this.maskAnchor.className="m-crs-maskAnchor",c&&(this.maskAnchorImg=document.createElement("img"),this.maskAnchor.appendChild(this.maskAnchorImg)),this.con.appendChild(this.maskAnchor),this.maskAnchor.addEventListener("transitionend",function(){"reverse"===t.mode&&(++s%2?(t.setMaskAnchorBg(this.nextIdx),this.style.transition="none",this.style.transform="rotate3d(0,1,0,-90deg)",this.offsetWidth,this.style.transition=t.transDuration/2+"s all linear",this.style.transform="rotate3d(0,1,0,0deg)"):(this.style.transition="none",t.maskAnchor.style.transform="none",t.isOperational=!0))})},initCubeFaces:function(){var t=this;this.cubeFront=document.createElement("div"),this.cubeBack=document.createElement("div"),this.cubeFront.className=this.cubeBack.className="m-crs-cubeface",this.cubeFront.style.transformOrigin=this.cubeBack.style.transformOrigin="50% 50% "+-this.cardWidth/2+"px",this.cubeFront.addEventListener("transitionend",function(){this.style.transition=t.cubeBack.style.transition="none",this.style.backgroundImage=t.cubeBack.style.backgroundImage,this.style.transform="rotate3d(0,1,0,0deg)",t.cubeBack.style.transform="rotate3d(0,1,0,90deg)",t.isOperational=!0},!1)},initPages:function(){var t=0,s=this;this.pageCover=document.createElement("div"),this.pageBack=document.createElement("div"),this.pageCover.className="m-crs-pagecover",this.pageBack.className="m-crs-pageback",this.pageCover.style.backgroundSize=this.pageBack.style.backgroundSize=this.cardWidth+"px "+this.cardHeight+"px",this.pageCover.addEventListener("transitionend",function(){++t%2?(this.style.transition="none",this.style.backgroundImage="url("+s.bgs[s.curIdx]+")",this.offsetWidth,this.leftToRight?(this.style.left="50%",this.style.backgroundPosition="100% 0",this.style.transformOrigin="0 0",this.style.transform="rotate3d(0,1,0,-90deg)"):(this.style.left=0,this.style.backgroundPosition="0 0",this.style.transformOrigin="100% 0",this.style.transform="rotate3d(0,1,0,90deg)"),this.offsetWidth,this.style.transition=s.transDuration/2+"s all linear",this.style.transform="rotate3d(0,1,0,0deg)"):(s.cards[s.curIdx].style.display="block",s.cards[this.lastIdx].style.display="none",this.style.transition="none",this.style.transform="none",s.isOperational=!0)},!1)},resetStyle:function(){var t;this.cards[0].transform="translate3d(0,0,0)";for(var s=1;s<this.cards.length;s++)t=this.cards[s],t.style.transform="translate3d("+this.cardWidth+"px,0,0)"},setMaskAnchorRef:function(t){this.maskAnchor.href=this.refs[t]},resetBricks:function(){for(var t=0;t<this.bricks.length;t++)this.bricks[t].style.transition="none",this.bricks[t].style.backgroundImage="url("+this.bgs[this.curIdx]+")",this.bricks[t].style.opacity=1,this.bricks[t].style.transform="none",this.bricks[t].offsetWidth},setModeToBricks:function(){var t=document.createDocumentFragment();this.resetMode("bricks"),this.con.style.overflow="visible",this.con.style.perspective=this.perspective+"px";for(var s=0;s<this.bricks.length;s++)this.bricks[s].className="m-crs-brick",this.bricks[s].style.transform="none",this.bricks[s].style.backgroundImage="url("+this.bgs[this.curIdx]+")",t.appendChild(this.bricks[s]);for(var s=0;s<this.cards.length;s++)this.cards[s].style.transform="none",this.cards[s].style.display=s===this.curIdx?"block":"none";this.con.appendChild(t),this.mode="bricks"},clearBricks:function(){for(var t=0;t<this.bricks.length;t++)this.con.removeChild(this.bricks[t])},explode:function(t){"bricks"!==this.mode&&this.setModeToBricks();var e=this.cards[t],i=this.cards[this.curIdx];e.style.display="block",i.style.display="none",this.setMaskAnchorRef(t);for(var r=0;r<this.bricks.length;r++)brick=this.bricks[r],brick.offsetWidth,brick.style.transition=this.explodeDuration+"s all cubic-bezier(0,1.1,1,1)",brick.style.opacity=0,brick.style.transform="translate3d("+brick.Fx+"px,"+brick.Fy+"px,"+brick.Fz+"px) rotate3d("+Math.random()+","+Math.random()+","+Math.random()+","+s(30,1080)+"deg)"},blowaway:function(t){"bricks"!==this.mode&&this.setModeToBricks();var e=this.cards[t],i=this.cards[this.curIdx],r=this,a=this.cols+this.rows-2;i.style.display="none",e.style.display="block",this.setMaskAnchorRef(t);for(var n=0;n<this.rows;n++)for(var o=0;o<this.cols;o++)!function(){var t=n*r.cols+o,e=r.bricks[t];setTimeout(function(){e.style.transition=r.transDuration+"s all cubic-bezier(0,0,0.4,1)",e.style.opacity=0,e.style.transform="translate3d("+e.blowX+"px,"+e.blowY+"px,"+e.blowZ+"px) rotate3d("+Math.random()+","+Math.random()+","+Math.random()+","+s(30,360)+"deg)"},20+80*(a-n-o))}()},setModeToAdboard:function(){var t=document.createDocumentFragment();this.resetMode("adboard"),this.con.style.overflow="visible",this.con.style.perspective="none";for(var s=0;s<this.bricks.length;s++)this.bricks[s].style.backgroundImage="url("+this.bgs[this.curIdx]+")",this.bricks[s].style.transform="perspective("+this.perspective+"px)",t.appendChild(this.bricks[s]),this.bricks[s].offsetWidth;this.con.appendChild(t);for(var s=0;s<this.cards.length;s++)this.cards[s].style.display="none";this.mode="adboard"},adboard:function(t){"adboard"!==this.mode&&this.setModeToAdboard(),this.setMaskAnchorRef(t);var s=(this.cards[t],this.cards[this.curIdx],this);this.bricks[this.bricks.length-1].realEnd=!1;for(var e=0;e<this.rows;e++)for(var i=0;i<this.cols;i++)!function(){var r=e*s.cols+i,a=s.bricks[r];a.style.transition=s.transDuration/2+"s all linear",setTimeout(function(){setTimeout(function(){r===s.bricks.length-1&&(a.realEnd=!0),a.style.transition="none",a.style.backgroundImage="url("+s.bgs[t]+")",a.style.transform="perspective("+s.perspective+"px) rotate3d(0,1,0,-90deg)",a.offsetWidth,setTimeout(function(){a.style.transition=s.transDuration/2+"s all linear",a.style.transform="perspective("+s.perspective+"px) rotate3d(0,1,0,0deg)"},20)},s.transDuration/2*1e3),a.style.transform="perspective("+s.perspective+"px) rotate3d(0,1,0,90deg)"},80*(e+i)+20)}()},setModeToReverse:function(){this.resetMode(),this.con.style.overflow="visible",this.con.style.perspective=this.perspective+"px";for(var t=0;t<this.cards.length;t++)this.cards[t].style.display="none";this.setMaskAnchorBg(this.curIdx),this.maskAnchor.offsetWidth,this.mode="reverse"},setMaskAnchorBg:c?function(t){this.maskAnchor.children[0].src=this.bgs[t]}:function(t){this.maskAnchor.style.backgroundImage="url("+this.bgs[t]+")"},clearMaskAnchorBg:c?function(){this.maskAnchorImg.removeAttribute("src")}:function(){this.maskAnchor.style.backgroundImage="none"},reverse:function(t){var s=this,e=this.maskAnchor;"reverse"!==this.mode&&this.setModeToReverse(),this.setMaskAnchorRef(t),e.nextIdx=t,e.style.transition=s.transDuration/2+"s all linear",e.style.transform="rotate3d(0,1,0,90deg)"},setModeToCube:function(){this.resetMode(),this.con.style.perspective=this.perspective+"px",this.con.style.overflow="visible",this.con.appendChild(this.cubeFront),this.con.appendChild(this.cubeBack),this.cubeBack.style.transform="rotateY(90deg)",this.cubeFront.style.backgroundImage="url("+this.bgs[this.curIdx]+")",this.cubeFront.offsetWidth,this.cubeBack.offsetWidth;for(var t=0;t<this.cards.length;t++)this.cards[t].style.display="none";this.mode="cube"},clearCubefaces:function(){this.con.removeChild(this.cubeFront),this.con.removeChild(this.cubeBack)},cube:function(t){var s;this.cards[t],this.cards[this.curIdx];"cube"!==this.mode&&this.setModeToCube(),this.setMaskAnchorRef(t),this.cubeBack.style.backgroundImage="url("+this.bgs[t]+")",s=t<this.curIdx&&(0!==t||this.curIdx!==this.cardCount-1)||t===this.cardCount-1&&0===this.curIdx?!1:!0,this.cubeBack.style.transform=s?"rotate3d(0,1,0,90deg)":"rotate3d(0,1,0,-90deg)",this.cubeBack.offsetWidth,this.cubeFront.style.transition=this.cubeBack.style.transition=this.transDuration+"s all linear",this.cubeFront.style.transform=s?"rotate3d(0,1,0,-90deg)":"rotate3d(0,1,0,90deg)",this.cubeBack.style.transform="rotate3d(0,1,0,0deg)"},setModeToFlipover:function(){this.resetMode(),this.con.style.overflow="visible";for(var t=0;t<this.cards.length;t++)this.cards[t].style.transform="none",this.cards[t].style.display=t===this.curIdx?"block":"none";this.con.appendChild(this.pageBack),this.con.appendChild(this.pageCover),this.pageCover.style.backgroundImage="url("+this.bgs[this.curIdx]+")",this.mode="flipover"},clearFlipPages:function(){this.con.removeChild(this.pageCover),this.con.removeChild(this.pageBack)},flipover:function(t){this.cards[t],this.cards[this.curIdx];"flipover"!==this.mode&&this.setModeToFlipover(),t<this.curIdx&&(0!==t||this.curIdx!==this.cardCount-1)||t===this.cardCount-1&&0===this.curIdx?this.pageCover.leftToRight=!0:this.pageCover.leftToRight=!1,this.setMaskAnchorRef(t),this.pageBack.style.backgroundImage="url("+this.bgs[t]+")",this.pageCover.leftToRight?(this.pageBack.style.left=0,this.pageBack.style.backgroundPosition="0 0",this.pageCover.style.left=0,this.pageCover.style.backgroundPosition="0 0",this.pageCover.style.transformOrigin="100% 0"):(this.pageBack.style.left="50%",this.pageBack.style.backgroundPosition="100% 0",this.pageCover.style.left="50%",this.pageCover.style.backgroundPosition="100% 0",this.pageCover.style.transformOrigin="0 0"),this.pageBack.offsetWidth,this.pageCover.offsetWidth,this.pageCover.lastIdx=this.curIdx,this.pageCover.style.transition=this.transDuration/2+"s all linear",this.pageCover.leftToRight?this.pageCover.style.transform="rotate3d(0,1,0,90deg)":this.pageCover.style.transform="rotate3d(0,1,0,-90deg)"},resetMode:function(t){switch(this.mode){case"bricks":case"adboard":"bricks"!==t&&"adboard"!==t&&this.clearBricks();break;case"cube":this.clearCubefaces();break;case"reverse":this.clearMaskAnchorBg();break;case"flipover":this.clearFlipPages();break;case"translate":this.clearTranslate();break;case"fade":this.clearFade()}this.con.style.overflow="hidden",this.con.style.perspective=this.perspective+"px"},animate:function(t,s){var e=~~(this.duration/20),i=0,r=this.easing,a=this;requestAnimationFrame(function n(){i++;for(var o,h,c,l=0;l<t.length;l++)switch(h=t[l],o=h.elt,c=r(i,h.base,h.incre,e),h.prop){case"x":o.style.transform="translate3d("+c+"px,0,0)";break;case"y":o.style.transform="translate3d(0,"+c+"px,0)";break;case"s":o.style.transform="scale3d("+c+","+c+",1)";break;case"o":o.style.opacity=c}i===e?(a.isOperational=!0,s&&s()):requestAnimationFrame(n)})},setModeToTranslate:function(){var t;this.resetMode();for(var s=0;s<this.cards.length;s++)t=this.cards[s],t.style.display="block",t.style.transform=s===this.curIdx?"none":"translate3d("+this.cardWidth+"px,0,0)";this.mode="translate"},clearTranslate:function(){for(var t=0;t<this.cards.length;t++)this.cards[t].style.transition="none",this.cards[t].style.transform="none"},translate:function(t,s,e){var i,r=this.cards[this.curIdx],a=this.cards[t];"translate"!==this.mode&&this.setModeToTranslate(),i=t<this.curIdx&&(this.curIdx!==this.cardCount-1||0!==t)||0===this.curIdx&&t===this.cardCount-1?-1:1,"x"===s?a.style.transform="translate3d("+i*e+",0,0)":a.style.transform="translate3d(0,"+i*e+"px,0)",this.animate([{elt:r,prop:s,base:0,incre:-i*e},{elt:a,prop:s,base:i*e,incre:-i*e}])},horizontal:function(t){this.setMaskAnchorRef(t),this.translate(t,"x",this.cardWidth)},vertical:function(t){this.setMaskAnchorRef(t),this.translate(t,"y",this.cardHeight)},setModeToFade:function(){this.resetMode("fade"),this.con.style.overflow="visible";for(var t=0;t<this.cards.length;t++)this.cards[t].style.display="block",this.cards[t].style.transform="none",this.cards[t].style.opacity=t===this.curIdx?1:0,this.cards[t].style.zIndex=t===this.curIdx?10:0;this.mode="fade"},clearFade:function(){for(var t=0;t<this.cards.length;t++)this.cards[t].style.opacity=1,this.cards[t].style.zIndex=0,this.cards[t].style.transform="none"},fade:function(t){var s=this.cards[t],e=this.cards[this.curIdx];"fade"!==this.mode&&this.setModeToFade("fade"),this.setMaskAnchorRef(t),e.style.zIndex=0,s.style.zIndex=10,this.animate([{elt:s,prop:"o",base:0,incre:1},{elt:e,prop:"o",base:1,incre:-1}])},cover:function(t){var s=this.cards[t],e=this.cards[this.curIdx];"fade"!==this.mode&&this.setModeToFade(),this.setMaskAnchorRef(t),e.style.zIndex=5,s.style.zIndex=10,s.style.transform="scale3d(1.5,1.5,1)",this.animate([{elt:s,prop:"o",base:0,incre:1},{elt:s,prop:"s",base:1.5,incre:-.5}],function(){e.style.zIndex=0})}}),t.SimpleCarousel=e,t.Css3Carousel=i}(window);